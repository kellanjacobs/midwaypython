# Adding a Database

In this lesson we will setup the model files for out database connection. The cookiecutter did so much
of this already for us. We simply have to define our tables and our fields and we are ready to go. 

## Objectives
* Define our horse and race model
* Perform a database migration
* Initialize the database with new data

## Steps

First step is lets delete the dummy model that the cookiecutter created for us. 
Remove the `midway/models/mymodel.py` file. 

Inside the models directory lets create a new file `midway/models/horse.py`

```python
from sqlalchemy import (
    Column,
    Integer,
    String
)

from sqlalchemy.orm import relationship

from .meta import Base

class Horse(Base):
    """ The SQLAlchemy declarative model class for a Horse object. """
    __tablename__ = 'horses'
    id = Column(Integer, primary_key=True)
    name = Column(String, nullable=False, unique=True)
    active = Column(Integer, nullable=False, default=1)
    races = relationship('Race', back_populates="horse")

    def __repr__(self):
        return self.name
````

We are creating a table named horses. Inside that table we have added four columns

* **id** is the primary key for this table
* **name** is the horses name
* **active** Track if the horse is available to race. 

We have also set some defaults for a couple of the columns so that the user doesn't need to define them
if they don't want too. At this point we could create a constructor if we wanted too. But it is not 
required. Sqlalchemy creates one for us. 

Now lets create our second data model to define a race. Add the file `midway/models/race.py`

```python
from sqlalchemy import (
    Column,
    ForeignKey,
    Integer,
)
from sqlalchemy.orm import relationship

from .meta import Base


class Race(Base):
    """ The SQLAlchemy declarative model class for a Page object. """
    __tablename__ = 'races'
    id = Column(Integer, primary_key=True)
    race_number = Column(Integer, nullable=False)
    place = Column(Integer, default=99)
    horse_id = Column(ForeignKey('horses.id'), nullable=False)
    horse = relationship('Horse', back_populates="races")
```

Now tht we have our models defined it is time to tell pyramid about them. We do that inside the 
`midway/models/__init__.py` file. This file is alot of code but we are only changing two lines. We need
to take out the import of mymodel and replace it with the imports of horse and race.

```python
from sqlalchemy import engine_from_config
from sqlalchemy.orm import sessionmaker
from sqlalchemy.orm import configure_mappers
import zope.sqlalchemy

# import or define all models here to ensure they are attached to the
# Base.metadata prior to any initialization routines
from .horse import Horse
from .race import Race
# run configure_mappers after defining all of the models to ensure
# all relationships can be setup
configure_mappers()


def get_engine(settings, prefix='sqlalchemy.'):
    return engine_from_config(settings, prefix)


def get_session_factory(engine):
    factory = sessionmaker()
    factory.configure(bind=engine)
    return factory


def get_tm_session(session_factory, transaction_manager):
    """
    Get a ``sqlalchemy.orm.Session`` instance backed by a transaction.

    This function will hook the session to the transaction manager which
    will take care of committing any changes.

    - When using pyramid_tm it will automatically be committed or aborted
      depending on whether an exception is raised.

    - When using scripts you should wrap the session in a manager yourself.
      For example::

          import transaction

          engine = get_engine(settings)
          session_factory = get_session_factory(engine)
          with transaction.manager:
              dbsession = get_tm_session(session_factory, transaction.manager)

    """
    dbsession = session_factory()
    zope.sqlalchemy.register(
        dbsession, transaction_manager=transaction_manager)
    return dbsession


def includeme(config):
    """
    Initialize the model for a Pyramid app.

    Activate this setup using ``config.include('midway.models')``.

    """
    settings = config.get_settings()
    settings['tm.manager_hook'] = 'pyramid_tm.explicit_manager'

    # use pyramid_tm to hook the transaction lifecycle to the request
    config.include('pyramid_tm')

    # use pyramid_retry to retry a request when transient exceptions occur
    config.include('pyramid_retry')

    session_factory = get_session_factory(get_engine(settings))
    config.registry['dbsession_factory'] = session_factory

    # make request.dbsession available for use in Pyramid
    config.add_request_method(
        # r.tm is the transaction manager used by pyramid_tm
        lambda r: get_tm_session(session_factory, r.tm),
        'dbsession',
        reify=True
    )
```

Now we can run the database migrations. 

```bash
$VENV/bin/alembic -c development.ini revision --autogenerate -m "use new models Horse and Race"
$VENV/bin/alembic -c development.ini upgrade head

```

The last step is to populate our database with some initial data. Lets open our `midway/initialize_db.py` file

```python
import argparse
import sys

from pyramid.paster import bootstrap, setup_logging
from sqlalchemy.exc import OperationalError

from .. import models


def setup_models(dbsession):
    """
    Add or update models / fixtures in the database.

    """
    peter = models.horse.Horse(name='Peter')
    dbsession.add(peter)

    lois = models.horse.Horse(name='Lois')
    dbsession.add(lois)

    meg = models.horse.Horse(name='Meg')
    dbsession.add(meg)

    chris = models.horse.Horse(name='Chris')
    dbsession.add(chris)

    Stewie = models.horse.Horse(name='Stewie')
    dbsession.add(Stewie)

    Rupert = models.horse.Horse(name='Rupert')
    dbsession.add(Rupert)

    Brian = models.horse.Horse(name='Brian')
    dbsession.add(Brian)

    Cleveland = models.horse.Horse(name='Cleveland')
    dbsession.add(Cleveland)

    joe = models.horse.Horse(name='Joe')
    dbsession.add(joe)

    Quagmire = models.horse.Horse(name='Quagmire')
    dbsession.add(Quagmire)

    race10 = models.race.Race(race_number=1, place=1, horse_id=9)
    dbsession.add(race10)
    race11 = models.race.Race(race_number=1, place=2, horse_id=10)
    dbsession.add(race11)
    race12 = models.race.Race(race_number=1, place=3, horse_id=5)
    dbsession.add(race12)
    race13 = models.race.Race(race_number=1, place=4, horse_id=7)
    dbsession.add(race13)
    race14 = models.race.Race(race_number=1, place=5, horse_id=3)
    dbsession.add(race14)
    race20 = models.race.Race(race_number=2, place=1, horse_id=9)
    dbsession.add(race20)
    race21 = models.race.Race(race_number=2, place=2, horse_id=8)
    dbsession.add(race21)
    race22 = models.race.Race(race_number=2, place=3, horse_id=2)
    dbsession.add(race22)
    race23 = models.race.Race(race_number=2, place=4, horse_id=7)
    dbsession.add(race23)
    race24 = models.race.Race(race_number=2, place=5, horse_id=1)
    dbsession.add(race24)
    race30 = models.race.Race(race_number=3, place=1, horse_id=8)
    dbsession.add(race30)
    race31 = models.race.Race(race_number=3, place=2, horse_id=1)
    dbsession.add(race31)
    race32 = models.race.Race(race_number=3, place=3, horse_id=9)
    dbsession.add(race32)
    race33 = models.race.Race(race_number=3, place=4, horse_id=7)
    dbsession.add(race33)
    race34 = models.race.Race(race_number=3, place=5, horse_id=6)
    dbsession.add(race34)
    race40 = models.race.Race(race_number=4, place=1, horse_id=7)
    dbsession.add(race40)
    race41 = models.race.Race(race_number=4, place=2, horse_id=9)
    dbsession.add(race41)
    race42 = models.race.Race(race_number=4, place=3, horse_id=1)
    dbsession.add(race42)
    race43 = models.race.Race(race_number=4, place=4, horse_id=4)
    dbsession.add(race43)
    race44 = models.race.Race(race_number=4, place=5, horse_id=2)
    dbsession.add(race44)
    race50 = models.race.Race(race_number=5, place=1, horse_id=7)
    dbsession.add(race50)
    race51 = models.race.Race(race_number=5, place=2, horse_id=5)
    dbsession.add(race51)
    race52 = models.race.Race(race_number=5, place=3, horse_id=6)
    dbsession.add(race52)
    race53 = models.race.Race(race_number=5, place=4, horse_id=8)
    dbsession.add(race53)
    race54 = models.race.Race(race_number=5, place=5, horse_id=1)
    dbsession.add(race54)
    race60 = models.race.Race(race_number=6, place=1, horse_id=7)
    dbsession.add(race60)
    race61 = models.race.Race(race_number=6, place=2, horse_id=8)
    dbsession.add(race61)
    race62 = models.race.Race(race_number=6, place=3, horse_id=3)
    dbsession.add(race62)
    race63 = models.race.Race(race_number=6, place=4, horse_id=4)
    dbsession.add(race63)
    race64 = models.race.Race(race_number=6, place=5, horse_id=9)
    dbsession.add(race64)
    race70 = models.race.Race(race_number=7, place=1, horse_id=10)
    dbsession.add(race70)
    race71 = models.race.Race(race_number=7, place=2, horse_id=9)
    dbsession.add(race71)
    race72 = models.race.Race(race_number=7, place=3, horse_id=4)
    dbsession.add(race72)
    race73 = models.race.Race(race_number=7, place=4, horse_id=1)
    dbsession.add(race73)
    race74 = models.race.Race(race_number=7, place=5, horse_id=5)
    dbsession.add(race74)
    race80 = models.race.Race(race_number=8, place=1, horse_id=6)
    dbsession.add(race80)
    race81 = models.race.Race(race_number=8, place=2, horse_id=5)
    dbsession.add(race81)
    race82 = models.race.Race(race_number=8, place=3, horse_id=1)
    dbsession.add(race82)
    race83 = models.race.Race(race_number=8, place=4, horse_id=4)
    dbsession.add(race83)
    race84 = models.race.Race(race_number=8, place=5, horse_id=2)
    dbsession.add(race84)
    race90 = models.race.Race(race_number=9, place=1, horse_id=6)
    dbsession.add(race90)
    race91 = models.race.Race(race_number=9, place=2, horse_id=2)
    dbsession.add(race91)
    race92 = models.race.Race(race_number=9, place=3, horse_id=3)
    dbsession.add(race92)
    race93 = models.race.Race(race_number=9, place=4, horse_id=5)
    dbsession.add(race93)
    race94 = models.race.Race(race_number=9, place=5, horse_id=1)
    dbsession.add(race94)
    race100 = models.race.Race(race_number=10, place=1, horse_id=2)
    dbsession.add(race100)
    race101 = models.race.Race(race_number=10, place=2, horse_id=5)
    dbsession.add(race101)
    race102 = models.race.Race(race_number=10, place=3, horse_id=8)
    dbsession.add(race102)
    race103 = models.race.Race(race_number=10, place=4, horse_id=9)
    dbsession.add(race103)
    race104 = models.race.Race(race_number=10, place=5, horse_id=6)
    dbsession.add(race104)
    race110 = models.race.Race(race_number=11, place=1, horse_id=2)
    dbsession.add(race110)
    race111 = models.race.Race(race_number=11, place=2, horse_id=6)
    dbsession.add(race111)
    race112 = models.race.Race(race_number=11, place=3, horse_id=3)
    dbsession.add(race112)
    race113 = models.race.Race(race_number=11, place=4, horse_id=1)
    dbsession.add(race113)
    race114 = models.race.Race(race_number=11, place=5, horse_id=10)
    dbsession.add(race114)
    race120 = models.race.Race(race_number=12, place=1, horse_id=10)
    dbsession.add(race120)
    race121 = models.race.Race(race_number=12, place=2, horse_id=7)
    dbsession.add(race121)
    race122 = models.race.Race(race_number=12, place=3, horse_id=6)
    dbsession.add(race122)
    race123 = models.race.Race(race_number=12, place=4, horse_id=2)
    dbsession.add(race123)
    race124 = models.race.Race(race_number=12, place=5, horse_id=9)
    dbsession.add(race124)
    race130 = models.race.Race(race_number=13, place=1, horse_id=2)
    dbsession.add(race130)
    race131 = models.race.Race(race_number=13, place=2, horse_id=7)
    dbsession.add(race131)
    race132 = models.race.Race(race_number=13, place=3, horse_id=5)
    dbsession.add(race132)
    race133 = models.race.Race(race_number=13, place=4, horse_id=1)
    dbsession.add(race133)
    race134 = models.race.Race(race_number=13, place=5, horse_id=3)
    dbsession.add(race134)
    race140 = models.race.Race(race_number=14, place=1, horse_id=2)
    dbsession.add(race140)
    race141 = models.race.Race(race_number=14, place=2, horse_id=8)
    dbsession.add(race141)
    race142 = models.race.Race(race_number=14, place=3, horse_id=5)
    dbsession.add(race142)
    race143 = models.race.Race(race_number=14, place=4, horse_id=1)
    dbsession.add(race143)
    race144 = models.race.Race(race_number=14, place=5, horse_id=4)
    dbsession.add(race144)
    race150 = models.race.Race(race_number=15, place=1, horse_id=1)
    dbsession.add(race150)
    race151 = models.race.Race(race_number=15, place=2, horse_id=10)
    dbsession.add(race151)
    race152 = models.race.Race(race_number=15, place=3, horse_id=8)
    dbsession.add(race152)
    race153 = models.race.Race(race_number=15, place=4, horse_id=6)
    dbsession.add(race153)
    race154 = models.race.Race(race_number=15, place=5, horse_id=2)
    dbsession.add(race154)
    race160 = models.race.Race(race_number=16, place=1, horse_id=3)
    dbsession.add(race160)
    race161 = models.race.Race(race_number=16, place=2, horse_id=4)
    dbsession.add(race161)
    race162 = models.race.Race(race_number=16, place=3, horse_id=8)
    dbsession.add(race162)
    race163 = models.race.Race(race_number=16, place=4, horse_id=6)
    dbsession.add(race163)
    race164 = models.race.Race(race_number=16, place=5, horse_id=9)
    dbsession.add(race164)
    race170 = models.race.Race(race_number=17, place=1, horse_id=2)
    dbsession.add(race170)
    race171 = models.race.Race(race_number=17, place=2, horse_id=10)
    dbsession.add(race171)
    race172 = models.race.Race(race_number=17, place=3, horse_id=4)
    dbsession.add(race172)
    race173 = models.race.Race(race_number=17, place=4, horse_id=8)
    dbsession.add(race173)
    race174 = models.race.Race(race_number=17, place=5, horse_id=6)
    dbsession.add(race174)
    race180 = models.race.Race(race_number=18, place=1, horse_id=2)
    dbsession.add(race180)
    race181 = models.race.Race(race_number=18, place=2, horse_id=5)
    dbsession.add(race181)
    race182 = models.race.Race(race_number=18, place=3, horse_id=1)
    dbsession.add(race182)
    race183 = models.race.Race(race_number=18, place=4, horse_id=10)
    dbsession.add(race183)
    race184 = models.race.Race(race_number=18, place=5, horse_id=6)
    dbsession.add(race184)
    race190 = models.race.Race(race_number=19, place=1, horse_id=8)
    dbsession.add(race190)
    race191 = models.race.Race(race_number=19, place=2, horse_id=4)
    dbsession.add(race191)
    race192 = models.race.Race(race_number=19, place=3, horse_id=7)
    dbsession.add(race192)
    race193 = models.race.Race(race_number=19, place=4, horse_id=9)
    dbsession.add(race193)
    race194 = models.race.Race(race_number=19, place=5, horse_id=2)
    dbsession.add(race194)
    race200 = models.race.Race(race_number=20, place=1, horse_id=6)
    dbsession.add(race200)
    race201 = models.race.Race(race_number=20, place=2, horse_id=5)
    dbsession.add(race201)
    race202 = models.race.Race(race_number=20, place=3, horse_id=7)
    dbsession.add(race202)
    race203 = models.race.Race(race_number=20, place=4, horse_id=2)
    dbsession.add(race203)
    race204 = models.race.Race(race_number=20, place=5, horse_id=10)
    dbsession.add(race204)
    race210 = models.race.Race(race_number=21, place=1, horse_id=1)
    dbsession.add(race210)
    race211 = models.race.Race(race_number=21, place=2, horse_id=2)
    dbsession.add(race211)
    race212 = models.race.Race(race_number=21, place=3, horse_id=3)
    dbsession.add(race212)
    race213 = models.race.Race(race_number=21, place=4, horse_id=10)
    dbsession.add(race213)
    race214 = models.race.Race(race_number=21, place=5, horse_id=4)
    dbsession.add(race214)
    race220 = models.race.Race(race_number=22, place=1, horse_id=3)
    dbsession.add(race220)
    race221 = models.race.Race(race_number=22, place=2, horse_id=10)
    dbsession.add(race221)
    race222 = models.race.Race(race_number=22, place=3, horse_id=9)
    dbsession.add(race222)
    race223 = models.race.Race(race_number=22, place=4, horse_id=2)
    dbsession.add(race223)
    race224 = models.race.Race(race_number=22, place=5, horse_id=8)
    dbsession.add(race224)
    race230 = models.race.Race(race_number=23, place=1, horse_id=6)
    dbsession.add(race230)
    race231 = models.race.Race(race_number=23, place=2, horse_id=2)
    dbsession.add(race231)
    race232 = models.race.Race(race_number=23, place=3, horse_id=4)
    dbsession.add(race232)
    race233 = models.race.Race(race_number=23, place=4, horse_id=3)
    dbsession.add(race233)
    race234 = models.race.Race(race_number=23, place=5, horse_id=10)
    dbsession.add(race234)
    race240 = models.race.Race(race_number=24, place=1, horse_id=6)
    dbsession.add(race240)
    race241 = models.race.Race(race_number=24, place=2, horse_id=10)
    dbsession.add(race241)
    race242 = models.race.Race(race_number=24, place=3, horse_id=3)
    dbsession.add(race242)
    race243 = models.race.Race(race_number=24, place=4, horse_id=7)
    dbsession.add(race243)
    race244 = models.race.Race(race_number=24, place=5, horse_id=4)
    dbsession.add(race244)
    race250 = models.race.Race(race_number=25, place=1, horse_id=3)
    dbsession.add(race250)
    race251 = models.race.Race(race_number=25, place=2, horse_id=2)
    dbsession.add(race251)
    race252 = models.race.Race(race_number=25, place=3, horse_id=6)
    dbsession.add(race252)
    race253 = models.race.Race(race_number=25, place=4, horse_id=8)
    dbsession.add(race253)
    race254 = models.race.Race(race_number=25, place=5, horse_id=9)
    dbsession.add(race254)
    race260 = models.race.Race(race_number=26, place=1, horse_id=10)
    dbsession.add(race260)
    race261 = models.race.Race(race_number=26, place=2, horse_id=8)
    dbsession.add(race261)
    race262 = models.race.Race(race_number=26, place=3, horse_id=3)
    dbsession.add(race262)
    race263 = models.race.Race(race_number=26, place=4, horse_id=9)
    dbsession.add(race263)
    race264 = models.race.Race(race_number=26, place=5, horse_id=7)
    dbsession.add(race264)
    race270 = models.race.Race(race_number=27, place=1, horse_id=10)
    dbsession.add(race270)
    race271 = models.race.Race(race_number=27, place=2, horse_id=6)
    dbsession.add(race271)
    race272 = models.race.Race(race_number=27, place=3, horse_id=1)
    dbsession.add(race272)
    race273 = models.race.Race(race_number=27, place=4, horse_id=2)
    dbsession.add(race273)
    race274 = models.race.Race(race_number=27, place=5, horse_id=8)
    dbsession.add(race274)
    race280 = models.race.Race(race_number=28, place=1, horse_id=10)
    dbsession.add(race280)
    race281 = models.race.Race(race_number=28, place=2, horse_id=9)
    dbsession.add(race281)
    race282 = models.race.Race(race_number=28, place=3, horse_id=3)
    dbsession.add(race282)
    race283 = models.race.Race(race_number=28, place=4, horse_id=8)
    dbsession.add(race283)
    race284 = models.race.Race(race_number=28, place=5, horse_id=5)
    dbsession.add(race284)
    race290 = models.race.Race(race_number=29, place=1, horse_id=5)
    dbsession.add(race290)
    race291 = models.race.Race(race_number=29, place=2, horse_id=6)
    dbsession.add(race291)
    race292 = models.race.Race(race_number=29, place=3, horse_id=4)
    dbsession.add(race292)
    race293 = models.race.Race(race_number=29, place=4, horse_id=10)
    dbsession.add(race293)
    race294 = models.race.Race(race_number=29, place=5, horse_id=2)
    dbsession.add(race294)
    race300 = models.race.Race(race_number=30, place=1, horse_id=1)
    dbsession.add(race300)
    race301 = models.race.Race(race_number=30, place=2, horse_id=2)
    dbsession.add(race301)
    race302 = models.race.Race(race_number=30, place=3, horse_id=3)
    dbsession.add(race302)
    race303 = models.race.Race(race_number=30, place=4, horse_id=6)
    dbsession.add(race303)
    race304 = models.race.Race(race_number=30, place=5, horse_id=9)
    dbsession.add(race304)
    race310 = models.race.Race(race_number=31, place=1, horse_id=7)
    dbsession.add(race310)
    race311 = models.race.Race(race_number=31, place=2, horse_id=10)
    dbsession.add(race311)
    race312 = models.race.Race(race_number=31, place=3, horse_id=5)
    dbsession.add(race312)
    race313 = models.race.Race(race_number=31, place=4, horse_id=1)
    dbsession.add(race313)
    race314 = models.race.Race(race_number=31, place=5, horse_id=8)
    dbsession.add(race314)
    race320 = models.race.Race(race_number=32, place=1, horse_id=8)
    dbsession.add(race320)
    race321 = models.race.Race(race_number=32, place=2, horse_id=2)
    dbsession.add(race321)
    race322 = models.race.Race(race_number=32, place=3, horse_id=9)
    dbsession.add(race322)
    race323 = models.race.Race(race_number=32, place=4, horse_id=10)
    dbsession.add(race323)
    race324 = models.race.Race(race_number=32, place=5, horse_id=4)
    dbsession.add(race324)
    race330 = models.race.Race(race_number=33, place=1, horse_id=7)
    dbsession.add(race330)
    race331 = models.race.Race(race_number=33, place=2, horse_id=6)
    dbsession.add(race331)
    race332 = models.race.Race(race_number=33, place=3, horse_id=9)
    dbsession.add(race332)
    race333 = models.race.Race(race_number=33, place=4, horse_id=4)
    dbsession.add(race333)
    race334 = models.race.Race(race_number=33, place=5, horse_id=3)
    dbsession.add(race334)
    race340 = models.race.Race(race_number=34, place=1, horse_id=8)
    dbsession.add(race340)
    race341 = models.race.Race(race_number=34, place=2, horse_id=4)
    dbsession.add(race341)
    race342 = models.race.Race(race_number=34, place=3, horse_id=1)
    dbsession.add(race342)
    race343 = models.race.Race(race_number=34, place=4, horse_id=7)
    dbsession.add(race343)
    race344 = models.race.Race(race_number=34, place=5, horse_id=10)
    dbsession.add(race344)
    race350 = models.race.Race(race_number=35, place=1, horse_id=9)
    dbsession.add(race350)
    race351 = models.race.Race(race_number=35, place=2, horse_id=5)
    dbsession.add(race351)
    race352 = models.race.Race(race_number=35, place=3, horse_id=3)
    dbsession.add(race352)
    race353 = models.race.Race(race_number=35, place=4, horse_id=10)
    dbsession.add(race353)
    race354 = models.race.Race(race_number=35, place=5, horse_id=6)
    dbsession.add(race354)
    race360 = models.race.Race(race_number=36, place=1, horse_id=3)
    dbsession.add(race360)
    race361 = models.race.Race(race_number=36, place=2, horse_id=8)
    dbsession.add(race361)
    race362 = models.race.Race(race_number=36, place=3, horse_id=1)
    dbsession.add(race362)
    race363 = models.race.Race(race_number=36, place=4, horse_id=6)
    dbsession.add(race363)
    race364 = models.race.Race(race_number=36, place=5, horse_id=9)
    dbsession.add(race364)
    race370 = models.race.Race(race_number=37, place=1, horse_id=9)
    dbsession.add(race370)
    race371 = models.race.Race(race_number=37, place=2, horse_id=5)
    dbsession.add(race371)
    race372 = models.race.Race(race_number=37, place=3, horse_id=1)
    dbsession.add(race372)
    race373 = models.race.Race(race_number=37, place=4, horse_id=4)
    dbsession.add(race373)
    race374 = models.race.Race(race_number=37, place=5, horse_id=2)
    dbsession.add(race374)
    race380 = models.race.Race(race_number=38, place=1, horse_id=3)
    dbsession.add(race380)
    race381 = models.race.Race(race_number=38, place=2, horse_id=10)
    dbsession.add(race381)
    race382 = models.race.Race(race_number=38, place=3, horse_id=9)
    dbsession.add(race382)
    race383 = models.race.Race(race_number=38, place=4, horse_id=8)
    dbsession.add(race383)
    race384 = models.race.Race(race_number=38, place=5, horse_id=1)
    dbsession.add(race384)
    race390 = models.race.Race(race_number=39, place=1, horse_id=4)
    dbsession.add(race390)
    race391 = models.race.Race(race_number=39, place=2, horse_id=8)
    dbsession.add(race391)
    race392 = models.race.Race(race_number=39, place=3, horse_id=6)
    dbsession.add(race392)
    race393 = models.race.Race(race_number=39, place=4, horse_id=5)
    dbsession.add(race393)
    race394 = models.race.Race(race_number=39, place=5, horse_id=2)
    dbsession.add(race394)
    race400 = models.race.Race(race_number=40, place=1, horse_id=10)
    dbsession.add(race400)
    race401 = models.race.Race(race_number=40, place=2, horse_id=6)
    dbsession.add(race401)
    race402 = models.race.Race(race_number=40, place=3, horse_id=7)
    dbsession.add(race402)
    race403 = models.race.Race(race_number=40, place=4, horse_id=5)
    dbsession.add(race403)
    race404 = models.race.Race(race_number=40, place=5, horse_id=9)
    dbsession.add(race404)
    race410 = models.race.Race(race_number=41, place=1, horse_id=6)
    dbsession.add(race410)
    race411 = models.race.Race(race_number=41, place=2, horse_id=10)
    dbsession.add(race411)
    race412 = models.race.Race(race_number=41, place=3, horse_id=7)
    dbsession.add(race412)
    race413 = models.race.Race(race_number=41, place=4, horse_id=3)
    dbsession.add(race413)
    race414 = models.race.Race(race_number=41, place=5, horse_id=9)
    dbsession.add(race414)
    race420 = models.race.Race(race_number=42, place=1, horse_id=5)
    dbsession.add(race420)
    race421 = models.race.Race(race_number=42, place=2, horse_id=1)
    dbsession.add(race421)
    race422 = models.race.Race(race_number=42, place=3, horse_id=8)
    dbsession.add(race422)
    race423 = models.race.Race(race_number=42, place=4, horse_id=3)
    dbsession.add(race423)
    race424 = models.race.Race(race_number=42, place=5, horse_id=4)
    dbsession.add(race424)
    race430 = models.race.Race(race_number=43, place=1, horse_id=4)
    dbsession.add(race430)
    race431 = models.race.Race(race_number=43, place=2, horse_id=10)
    dbsession.add(race431)
    race432 = models.race.Race(race_number=43, place=3, horse_id=7)
    dbsession.add(race432)
    race433 = models.race.Race(race_number=43, place=4, horse_id=5)
    dbsession.add(race433)
    race434 = models.race.Race(race_number=43, place=5, horse_id=8)
    dbsession.add(race434)
    race440 = models.race.Race(race_number=44, place=1, horse_id=9)
    dbsession.add(race440)
    race441 = models.race.Race(race_number=44, place=2, horse_id=1)
    dbsession.add(race441)
    race442 = models.race.Race(race_number=44, place=3, horse_id=7)
    dbsession.add(race442)
    race443 = models.race.Race(race_number=44, place=4, horse_id=10)
    dbsession.add(race443)
    race444 = models.race.Race(race_number=44, place=5, horse_id=6)
    dbsession.add(race444)
    race450 = models.race.Race(race_number=45, place=1, horse_id=6)
    dbsession.add(race450)
    race451 = models.race.Race(race_number=45, place=2, horse_id=3)
    dbsession.add(race451)
    race452 = models.race.Race(race_number=45, place=3, horse_id=5)
    dbsession.add(race452)
    race453 = models.race.Race(race_number=45, place=4, horse_id=2)
    dbsession.add(race453)
    race454 = models.race.Race(race_number=45, place=5, horse_id=9)
    dbsession.add(race454)
    race460 = models.race.Race(race_number=46, place=1, horse_id=10)
    dbsession.add(race460)
    race461 = models.race.Race(race_number=46, place=2, horse_id=7)
    dbsession.add(race461)
    race462 = models.race.Race(race_number=46, place=3, horse_id=8)
    dbsession.add(race462)
    race463 = models.race.Race(race_number=46, place=4, horse_id=1)
    dbsession.add(race463)
    race464 = models.race.Race(race_number=46, place=5, horse_id=9)
    dbsession.add(race464)
    race470 = models.race.Race(race_number=47, place=1, horse_id=4)
    dbsession.add(race470)
    race471 = models.race.Race(race_number=47, place=2, horse_id=8)
    dbsession.add(race471)
    race472 = models.race.Race(race_number=47, place=3, horse_id=7)
    dbsession.add(race472)
    race473 = models.race.Race(race_number=47, place=4, horse_id=2)
    dbsession.add(race473)
    race474 = models.race.Race(race_number=47, place=5, horse_id=6)
    dbsession.add(race474)
    race480 = models.race.Race(race_number=48, place=1, horse_id=2)
    dbsession.add(race480)
    race481 = models.race.Race(race_number=48, place=2, horse_id=5)
    dbsession.add(race481)
    race482 = models.race.Race(race_number=48, place=3, horse_id=3)
    dbsession.add(race482)
    race483 = models.race.Race(race_number=48, place=4, horse_id=9)
    dbsession.add(race483)
    race484 = models.race.Race(race_number=48, place=5, horse_id=8)
    dbsession.add(race484)
    race490 = models.race.Race(race_number=49, place=1, horse_id=10)
    dbsession.add(race490)
    race491 = models.race.Race(race_number=49, place=2, horse_id=4)
    dbsession.add(race491)
    race492 = models.race.Race(race_number=49, place=3, horse_id=7)
    dbsession.add(race492)
    race493 = models.race.Race(race_number=49, place=4, horse_id=5)
    dbsession.add(race493)
    race494 = models.race.Race(race_number=49, place=5, horse_id=1)
    dbsession.add(race494)
    race500 = models.race.Race(race_number=50, place=1, horse_id=8)
    dbsession.add(race500)
    race501 = models.race.Race(race_number=50, place=2, horse_id=7)
    dbsession.add(race501)
    race502 = models.race.Race(race_number=50, place=3, horse_id=5)
    dbsession.add(race502)
    race503 = models.race.Race(race_number=50, place=4, horse_id=9)
    dbsession.add(race503)
    race504 = models.race.Race(race_number=50, place=5, horse_id=1)
    dbsession.add(race504)
    race510 = models.race.Race(race_number=51, place=1, horse_id=1)
    dbsession.add(race510)
    race511 = models.race.Race(race_number=51, place=2, horse_id=6)
    dbsession.add(race511)
    race512 = models.race.Race(race_number=51, place=3, horse_id=2)
    dbsession.add(race512)
    race513 = models.race.Race(race_number=51, place=4, horse_id=9)
    dbsession.add(race513)
    race514 = models.race.Race(race_number=51, place=5, horse_id=8)
    dbsession.add(race514)
    race520 = models.race.Race(race_number=52, place=1, horse_id=10)
    dbsession.add(race520)
    race521 = models.race.Race(race_number=52, place=2, horse_id=9)
    dbsession.add(race521)
    race522 = models.race.Race(race_number=52, place=3, horse_id=5)
    dbsession.add(race522)
    race523 = models.race.Race(race_number=52, place=4, horse_id=2)
    dbsession.add(race523)
    race524 = models.race.Race(race_number=52, place=5, horse_id=8)
    dbsession.add(race524)
    race530 = models.race.Race(race_number=53, place=1, horse_id=2)
    dbsession.add(race530)
    race531 = models.race.Race(race_number=53, place=2, horse_id=10)
    dbsession.add(race531)
    race532 = models.race.Race(race_number=53, place=3, horse_id=6)
    dbsession.add(race532)
    race533 = models.race.Race(race_number=53, place=4, horse_id=9)
    dbsession.add(race533)
    race534 = models.race.Race(race_number=53, place=5, horse_id=7)
    dbsession.add(race534)
    race540 = models.race.Race(race_number=54, place=1, horse_id=7)
    dbsession.add(race540)
    race541 = models.race.Race(race_number=54, place=2, horse_id=2)
    dbsession.add(race541)
    race542 = models.race.Race(race_number=54, place=3, horse_id=1)
    dbsession.add(race542)
    race543 = models.race.Race(race_number=54, place=4, horse_id=4)
    dbsession.add(race543)
    race544 = models.race.Race(race_number=54, place=5, horse_id=3)
    dbsession.add(race544)
    race550 = models.race.Race(race_number=55, place=1, horse_id=8)
    dbsession.add(race550)
    race551 = models.race.Race(race_number=55, place=2, horse_id=9)
    dbsession.add(race551)
    race552 = models.race.Race(race_number=55, place=3, horse_id=6)
    dbsession.add(race552)
    race553 = models.race.Race(race_number=55, place=4, horse_id=3)
    dbsession.add(race553)
    race554 = models.race.Race(race_number=55, place=5, horse_id=4)
    dbsession.add(race554)
    race560 = models.race.Race(race_number=56, place=1, horse_id=10)
    dbsession.add(race560)
    race561 = models.race.Race(race_number=56, place=2, horse_id=1)
    dbsession.add(race561)
    race562 = models.race.Race(race_number=56, place=3, horse_id=3)
    dbsession.add(race562)
    race563 = models.race.Race(race_number=56, place=4, horse_id=8)
    dbsession.add(race563)
    race564 = models.race.Race(race_number=56, place=5, horse_id=6)
    dbsession.add(race564)
    race570 = models.race.Race(race_number=57, place=1, horse_id=10)
    dbsession.add(race570)
    race571 = models.race.Race(race_number=57, place=2, horse_id=1)
    dbsession.add(race571)
    race572 = models.race.Race(race_number=57, place=3, horse_id=3)
    dbsession.add(race572)
    race573 = models.race.Race(race_number=57, place=4, horse_id=4)
    dbsession.add(race573)
    race574 = models.race.Race(race_number=57, place=5, horse_id=5)
    dbsession.add(race574)
    race580 = models.race.Race(race_number=58, place=1, horse_id=6)
    dbsession.add(race580)
    race581 = models.race.Race(race_number=58, place=2, horse_id=1)
    dbsession.add(race581)
    race582 = models.race.Race(race_number=58, place=3, horse_id=9)
    dbsession.add(race582)
    race583 = models.race.Race(race_number=58, place=4, horse_id=4)
    dbsession.add(race583)
    race584 = models.race.Race(race_number=58, place=5, horse_id=8)
    dbsession.add(race584)
    race590 = models.race.Race(race_number=59, place=1, horse_id=7)
    dbsession.add(race590)
    race591 = models.race.Race(race_number=59, place=2, horse_id=2)
    dbsession.add(race591)
    race592 = models.race.Race(race_number=59, place=3, horse_id=9)
    dbsession.add(race592)
    race593 = models.race.Race(race_number=59, place=4, horse_id=1)
    dbsession.add(race593)
    race594 = models.race.Race(race_number=59, place=5, horse_id=6)
    dbsession.add(race594)
    race600 = models.race.Race(race_number=60, place=1, horse_id=2)
    dbsession.add(race600)
    race601 = models.race.Race(race_number=60, place=2, horse_id=9)
    dbsession.add(race601)
    race602 = models.race.Race(race_number=60, place=3, horse_id=6)
    dbsession.add(race602)
    race603 = models.race.Race(race_number=60, place=4, horse_id=4)
    dbsession.add(race603)
    race604 = models.race.Race(race_number=60, place=5, horse_id=1)
    dbsession.add(race604)
    race610 = models.race.Race(race_number=61, place=1, horse_id=6)
    dbsession.add(race610)
    race611 = models.race.Race(race_number=61, place=2, horse_id=7)
    dbsession.add(race611)
    race612 = models.race.Race(race_number=61, place=3, horse_id=10)
    dbsession.add(race612)
    race613 = models.race.Race(race_number=61, place=4, horse_id=5)
    dbsession.add(race613)
    race614 = models.race.Race(race_number=61, place=5, horse_id=4)
    dbsession.add(race614)
    race620 = models.race.Race(race_number=62, place=1, horse_id=7)
    dbsession.add(race620)
    race621 = models.race.Race(race_number=62, place=2, horse_id=1)
    dbsession.add(race621)
    race622 = models.race.Race(race_number=62, place=3, horse_id=3)
    dbsession.add(race622)
    race623 = models.race.Race(race_number=62, place=4, horse_id=4)
    dbsession.add(race623)
    race624 = models.race.Race(race_number=62, place=5, horse_id=6)
    dbsession.add(race624)
    race630 = models.race.Race(race_number=63, place=1, horse_id=5)
    dbsession.add(race630)
    race631 = models.race.Race(race_number=63, place=2, horse_id=1)
    dbsession.add(race631)
    race632 = models.race.Race(race_number=63, place=3, horse_id=10)
    dbsession.add(race632)
    race633 = models.race.Race(race_number=63, place=4, horse_id=6)
    dbsession.add(race633)
    race634 = models.race.Race(race_number=63, place=5, horse_id=7)
    dbsession.add(race634)
    race640 = models.race.Race(race_number=64, place=1, horse_id=3)
    dbsession.add(race640)
    race641 = models.race.Race(race_number=64, place=2, horse_id=2)
    dbsession.add(race641)
    race642 = models.race.Race(race_number=64, place=3, horse_id=10)
    dbsession.add(race642)
    race643 = models.race.Race(race_number=64, place=4, horse_id=7)
    dbsession.add(race643)
    race644 = models.race.Race(race_number=64, place=5, horse_id=8)
    dbsession.add(race644)
    race650 = models.race.Race(race_number=65, place=1, horse_id=4)
    dbsession.add(race650)
    race651 = models.race.Race(race_number=65, place=2, horse_id=6)
    dbsession.add(race651)
    race652 = models.race.Race(race_number=65, place=3, horse_id=8)
    dbsession.add(race652)
    race653 = models.race.Race(race_number=65, place=4, horse_id=7)
    dbsession.add(race653)
    race654 = models.race.Race(race_number=65, place=5, horse_id=3)
    dbsession.add(race654)
    race660 = models.race.Race(race_number=66, place=1, horse_id=2)
    dbsession.add(race660)
    race661 = models.race.Race(race_number=66, place=2, horse_id=3)
    dbsession.add(race661)
    race662 = models.race.Race(race_number=66, place=3, horse_id=6)
    dbsession.add(race662)
    race663 = models.race.Race(race_number=66, place=4, horse_id=7)
    dbsession.add(race663)
    race664 = models.race.Race(race_number=66, place=5, horse_id=5)
    dbsession.add(race664)
    race670 = models.race.Race(race_number=67, place=1, horse_id=1)
    dbsession.add(race670)
    race671 = models.race.Race(race_number=67, place=2, horse_id=4)
    dbsession.add(race671)
    race672 = models.race.Race(race_number=67, place=3, horse_id=5)
    dbsession.add(race672)
    race673 = models.race.Race(race_number=67, place=4, horse_id=6)
    dbsession.add(race673)
    race674 = models.race.Race(race_number=67, place=5, horse_id=10)
    dbsession.add(race674)
    race680 = models.race.Race(race_number=68, place=1, horse_id=9)
    dbsession.add(race680)
    race681 = models.race.Race(race_number=68, place=2, horse_id=2)
    dbsession.add(race681)
    race682 = models.race.Race(race_number=68, place=3, horse_id=8)
    dbsession.add(race682)
    race683 = models.race.Race(race_number=68, place=4, horse_id=5)
    dbsession.add(race683)
    race684 = models.race.Race(race_number=68, place=5, horse_id=6)
    dbsession.add(race684)
    race690 = models.race.Race(race_number=69, place=1, horse_id=4)
    dbsession.add(race690)
    race691 = models.race.Race(race_number=69, place=2, horse_id=7)
    dbsession.add(race691)
    race692 = models.race.Race(race_number=69, place=3, horse_id=8)
    dbsession.add(race692)
    race693 = models.race.Race(race_number=69, place=4, horse_id=1)
    dbsession.add(race693)
    race694 = models.race.Race(race_number=69, place=5, horse_id=5)
    dbsession.add(race694)
    race700 = models.race.Race(race_number=70, place=1, horse_id=9)
    dbsession.add(race700)
    race701 = models.race.Race(race_number=70, place=2, horse_id=5)
    dbsession.add(race701)
    race702 = models.race.Race(race_number=70, place=3, horse_id=6)
    dbsession.add(race702)
    race703 = models.race.Race(race_number=70, place=4, horse_id=8)
    dbsession.add(race703)
    race704 = models.race.Race(race_number=70, place=5, horse_id=3)
    dbsession.add(race704)
    race710 = models.race.Race(race_number=71, place=1, horse_id=7)
    dbsession.add(race710)
    race711 = models.race.Race(race_number=71, place=2, horse_id=8)
    dbsession.add(race711)
    race712 = models.race.Race(race_number=71, place=3, horse_id=2)
    dbsession.add(race712)
    race713 = models.race.Race(race_number=71, place=4, horse_id=1)
    dbsession.add(race713)
    race714 = models.race.Race(race_number=71, place=5, horse_id=4)
    dbsession.add(race714)
    race720 = models.race.Race(race_number=72, place=1, horse_id=3)
    dbsession.add(race720)
    race721 = models.race.Race(race_number=72, place=2, horse_id=8)
    dbsession.add(race721)
    race722 = models.race.Race(race_number=72, place=3, horse_id=2)
    dbsession.add(race722)
    race723 = models.race.Race(race_number=72, place=4, horse_id=10)
    dbsession.add(race723)
    race724 = models.race.Race(race_number=72, place=5, horse_id=7)
    dbsession.add(race724)
    race730 = models.race.Race(race_number=73, place=1, horse_id=2)
    dbsession.add(race730)
    race731 = models.race.Race(race_number=73, place=2, horse_id=1)
    dbsession.add(race731)
    race732 = models.race.Race(race_number=73, place=3, horse_id=8)
    dbsession.add(race732)
    race733 = models.race.Race(race_number=73, place=4, horse_id=10)
    dbsession.add(race733)
    race734 = models.race.Race(race_number=73, place=5, horse_id=5)
    dbsession.add(race734)
    race740 = models.race.Race(race_number=74, place=1, horse_id=3)
    dbsession.add(race740)
    race741 = models.race.Race(race_number=74, place=2, horse_id=6)
    dbsession.add(race741)
    race742 = models.race.Race(race_number=74, place=3, horse_id=10)
    dbsession.add(race742)
    race743 = models.race.Race(race_number=74, place=4, horse_id=4)
    dbsession.add(race743)
    race744 = models.race.Race(race_number=74, place=5, horse_id=7)
    dbsession.add(race744)
    race750 = models.race.Race(race_number=75, place=1, horse_id=4)
    dbsession.add(race750)
    race751 = models.race.Race(race_number=75, place=2, horse_id=6)
    dbsession.add(race751)
    race752 = models.race.Race(race_number=75, place=3, horse_id=7)
    dbsession.add(race752)
    race753 = models.race.Race(race_number=75, place=4, horse_id=5)
    dbsession.add(race753)
    race754 = models.race.Race(race_number=75, place=5, horse_id=1)
    dbsession.add(race754)
    race760 = models.race.Race(race_number=76, place=1, horse_id=3)
    dbsession.add(race760)
    race761 = models.race.Race(race_number=76, place=2, horse_id=2)
    dbsession.add(race761)
    race762 = models.race.Race(race_number=76, place=3, horse_id=4)
    dbsession.add(race762)
    race763 = models.race.Race(race_number=76, place=4, horse_id=10)
    dbsession.add(race763)
    race764 = models.race.Race(race_number=76, place=5, horse_id=8)
    dbsession.add(race764)
    race770 = models.race.Race(race_number=77, place=1, horse_id=3)
    dbsession.add(race770)
    race771 = models.race.Race(race_number=77, place=2, horse_id=5)
    dbsession.add(race771)
    race772 = models.race.Race(race_number=77, place=3, horse_id=10)
    dbsession.add(race772)
    race773 = models.race.Race(race_number=77, place=4, horse_id=8)
    dbsession.add(race773)
    race774 = models.race.Race(race_number=77, place=5, horse_id=7)
    dbsession.add(race774)
    race780 = models.race.Race(race_number=78, place=1, horse_id=1)
    dbsession.add(race780)
    race781 = models.race.Race(race_number=78, place=2, horse_id=6)
    dbsession.add(race781)
    race782 = models.race.Race(race_number=78, place=3, horse_id=7)
    dbsession.add(race782)
    race783 = models.race.Race(race_number=78, place=4, horse_id=5)
    dbsession.add(race783)
    race784 = models.race.Race(race_number=78, place=5, horse_id=3)
    dbsession.add(race784)
    race790 = models.race.Race(race_number=79, place=1, horse_id=10)
    dbsession.add(race790)
    race791 = models.race.Race(race_number=79, place=2, horse_id=7)
    dbsession.add(race791)
    race792 = models.race.Race(race_number=79, place=3, horse_id=6)
    dbsession.add(race792)
    race793 = models.race.Race(race_number=79, place=4, horse_id=3)
    dbsession.add(race793)
    race794 = models.race.Race(race_number=79, place=5, horse_id=8)
    dbsession.add(race794)
    race800 = models.race.Race(race_number=80, place=1, horse_id=1)
    dbsession.add(race800)
    race801 = models.race.Race(race_number=80, place=2, horse_id=9)
    dbsession.add(race801)
    race802 = models.race.Race(race_number=80, place=3, horse_id=5)
    dbsession.add(race802)
    race803 = models.race.Race(race_number=80, place=4, horse_id=8)
    dbsession.add(race803)
    race804 = models.race.Race(race_number=80, place=5, horse_id=4)
    dbsession.add(race804)
    race810 = models.race.Race(race_number=81, place=1, horse_id=8)
    dbsession.add(race810)
    race811 = models.race.Race(race_number=81, place=2, horse_id=1)
    dbsession.add(race811)
    race812 = models.race.Race(race_number=81, place=3, horse_id=9)
    dbsession.add(race812)
    race813 = models.race.Race(race_number=81, place=4, horse_id=6)
    dbsession.add(race813)
    race814 = models.race.Race(race_number=81, place=5, horse_id=3)
    dbsession.add(race814)
    race820 = models.race.Race(race_number=82, place=1, horse_id=4)
    dbsession.add(race820)
    race821 = models.race.Race(race_number=82, place=2, horse_id=2)
    dbsession.add(race821)
    race822 = models.race.Race(race_number=82, place=3, horse_id=10)
    dbsession.add(race822)
    race823 = models.race.Race(race_number=82, place=4, horse_id=9)
    dbsession.add(race823)
    race824 = models.race.Race(race_number=82, place=5, horse_id=6)
    dbsession.add(race824)
    race830 = models.race.Race(race_number=83, place=1, horse_id=2)
    dbsession.add(race830)
    race831 = models.race.Race(race_number=83, place=2, horse_id=10)
    dbsession.add(race831)
    race832 = models.race.Race(race_number=83, place=3, horse_id=3)
    dbsession.add(race832)
    race833 = models.race.Race(race_number=83, place=4, horse_id=1)
    dbsession.add(race833)
    race834 = models.race.Race(race_number=83, place=5, horse_id=7)
    dbsession.add(race834)
    race840 = models.race.Race(race_number=84, place=1, horse_id=8)
    dbsession.add(race840)
    race841 = models.race.Race(race_number=84, place=2, horse_id=2)
    dbsession.add(race841)
    race842 = models.race.Race(race_number=84, place=3, horse_id=7)
    dbsession.add(race842)
    race843 = models.race.Race(race_number=84, place=4, horse_id=4)
    dbsession.add(race843)
    race844 = models.race.Race(race_number=84, place=5, horse_id=9)
    dbsession.add(race844)
    race850 = models.race.Race(race_number=85, place=1, horse_id=10)
    dbsession.add(race850)
    race851 = models.race.Race(race_number=85, place=2, horse_id=6)
    dbsession.add(race851)
    race852 = models.race.Race(race_number=85, place=3, horse_id=3)
    dbsession.add(race852)
    race853 = models.race.Race(race_number=85, place=4, horse_id=5)
    dbsession.add(race853)
    race854 = models.race.Race(race_number=85, place=5, horse_id=8)
    dbsession.add(race854)
    race860 = models.race.Race(race_number=86, place=1, horse_id=4)
    dbsession.add(race860)
    race861 = models.race.Race(race_number=86, place=2, horse_id=3)
    dbsession.add(race861)
    race862 = models.race.Race(race_number=86, place=3, horse_id=10)
    dbsession.add(race862)
    race863 = models.race.Race(race_number=86, place=4, horse_id=9)
    dbsession.add(race863)
    race864 = models.race.Race(race_number=86, place=5, horse_id=7)
    dbsession.add(race864)
    race870 = models.race.Race(race_number=87, place=1, horse_id=6)
    dbsession.add(race870)
    race871 = models.race.Race(race_number=87, place=2, horse_id=3)
    dbsession.add(race871)
    race872 = models.race.Race(race_number=87, place=3, horse_id=10)
    dbsession.add(race872)
    race873 = models.race.Race(race_number=87, place=4, horse_id=9)
    dbsession.add(race873)
    race874 = models.race.Race(race_number=87, place=5, horse_id=5)
    dbsession.add(race874)
    race880 = models.race.Race(race_number=88, place=1, horse_id=10)
    dbsession.add(race880)
    race881 = models.race.Race(race_number=88, place=2, horse_id=5)
    dbsession.add(race881)
    race882 = models.race.Race(race_number=88, place=3, horse_id=2)
    dbsession.add(race882)
    race883 = models.race.Race(race_number=88, place=4, horse_id=7)
    dbsession.add(race883)
    race884 = models.race.Race(race_number=88, place=5, horse_id=4)
    dbsession.add(race884)
    race890 = models.race.Race(race_number=89, place=1, horse_id=7)
    dbsession.add(race890)
    race891 = models.race.Race(race_number=89, place=2, horse_id=9)
    dbsession.add(race891)
    race892 = models.race.Race(race_number=89, place=3, horse_id=10)
    dbsession.add(race892)
    race893 = models.race.Race(race_number=89, place=4, horse_id=4)
    dbsession.add(race893)
    race894 = models.race.Race(race_number=89, place=5, horse_id=6)
    dbsession.add(race894)
    race900 = models.race.Race(race_number=90, place=1, horse_id=4)
    dbsession.add(race900)
    race901 = models.race.Race(race_number=90, place=2, horse_id=9)
    dbsession.add(race901)
    race902 = models.race.Race(race_number=90, place=3, horse_id=6)
    dbsession.add(race902)
    race903 = models.race.Race(race_number=90, place=4, horse_id=8)
    dbsession.add(race903)
    race904 = models.race.Race(race_number=90, place=5, horse_id=2)
    dbsession.add(race904)
    race910 = models.race.Race(race_number=91, place=1, horse_id=6)
    dbsession.add(race910)
    race911 = models.race.Race(race_number=91, place=2, horse_id=8)
    dbsession.add(race911)
    race912 = models.race.Race(race_number=91, place=3, horse_id=1)
    dbsession.add(race912)
    race913 = models.race.Race(race_number=91, place=4, horse_id=7)
    dbsession.add(race913)
    race914 = models.race.Race(race_number=91, place=5, horse_id=4)
    dbsession.add(race914)
    race920 = models.race.Race(race_number=92, place=1, horse_id=10)
    dbsession.add(race920)
    race921 = models.race.Race(race_number=92, place=2, horse_id=4)
    dbsession.add(race921)
    race922 = models.race.Race(race_number=92, place=3, horse_id=1)
    dbsession.add(race922)
    race923 = models.race.Race(race_number=92, place=4, horse_id=7)
    dbsession.add(race923)
    race924 = models.race.Race(race_number=92, place=5, horse_id=6)
    dbsession.add(race924)
    race930 = models.race.Race(race_number=93, place=1, horse_id=10)
    dbsession.add(race930)
    race931 = models.race.Race(race_number=93, place=2, horse_id=5)
    dbsession.add(race931)
    race932 = models.race.Race(race_number=93, place=3, horse_id=1)
    dbsession.add(race932)
    race933 = models.race.Race(race_number=93, place=4, horse_id=7)
    dbsession.add(race933)
    race934 = models.race.Race(race_number=93, place=5, horse_id=6)
    dbsession.add(race934)
    race940 = models.race.Race(race_number=94, place=1, horse_id=4)
    dbsession.add(race940)
    race941 = models.race.Race(race_number=94, place=2, horse_id=7)
    dbsession.add(race941)
    race942 = models.race.Race(race_number=94, place=3, horse_id=6)
    dbsession.add(race942)
    race943 = models.race.Race(race_number=94, place=4, horse_id=8)
    dbsession.add(race943)
    race944 = models.race.Race(race_number=94, place=5, horse_id=3)
    dbsession.add(race944)
    race950 = models.race.Race(race_number=95, place=1, horse_id=9)
    dbsession.add(race950)
    race951 = models.race.Race(race_number=95, place=2, horse_id=7)
    dbsession.add(race951)
    race952 = models.race.Race(race_number=95, place=3, horse_id=1)
    dbsession.add(race952)
    race953 = models.race.Race(race_number=95, place=4, horse_id=5)
    dbsession.add(race953)
    race954 = models.race.Race(race_number=95, place=5, horse_id=10)
    dbsession.add(race954)
    race960 = models.race.Race(race_number=96, place=1, horse_id=9)
    dbsession.add(race960)
    race961 = models.race.Race(race_number=96, place=2, horse_id=8)
    dbsession.add(race961)
    race962 = models.race.Race(race_number=96, place=3, horse_id=7)
    dbsession.add(race962)
    race963 = models.race.Race(race_number=96, place=4, horse_id=6)
    dbsession.add(race963)
    race964 = models.race.Race(race_number=96, place=5, horse_id=10)
    dbsession.add(race964)
    race970 = models.race.Race(race_number=97, place=1, horse_id=7)
    dbsession.add(race970)
    race971 = models.race.Race(race_number=97, place=2, horse_id=3)
    dbsession.add(race971)
    race972 = models.race.Race(race_number=97, place=3, horse_id=4)
    dbsession.add(race972)
    race973 = models.race.Race(race_number=97, place=4, horse_id=9)
    dbsession.add(race973)
    race974 = models.race.Race(race_number=97, place=5, horse_id=6)
    dbsession.add(race974)
    race980 = models.race.Race(race_number=98, place=1, horse_id=4)
    dbsession.add(race980)
    race981 = models.race.Race(race_number=98, place=2, horse_id=7)
    dbsession.add(race981)
    race982 = models.race.Race(race_number=98, place=3, horse_id=6)
    dbsession.add(race982)
    race983 = models.race.Race(race_number=98, place=4, horse_id=1)
    dbsession.add(race983)
    race984 = models.race.Race(race_number=98, place=5, horse_id=3)
    dbsession.add(race984)
    race990 = models.race.Race(race_number=99, place=1, horse_id=2)
    dbsession.add(race990)
    race991 = models.race.Race(race_number=99, place=2, horse_id=4)
    dbsession.add(race991)
    race992 = models.race.Race(race_number=99, place=3, horse_id=7)
    dbsession.add(race992)
    race993 = models.race.Race(race_number=99, place=4, horse_id=3)
    dbsession.add(race993)
    race994 = models.race.Race(race_number=99, place=5, horse_id=9)
    dbsession.add(race994)
    race1000 = models.race.Race(race_number=100, place=1, horse_id=10)
    dbsession.add(race1000)
    race1001 = models.race.Race(race_number=100, place=2, horse_id=4)
    dbsession.add(race1001)
    race1002 = models.race.Race(race_number=100, place=3, horse_id=6)
    dbsession.add(race1002)
    race1003 = models.race.Race(race_number=100, place=4, horse_id=7)
    dbsession.add(race1003)
    race1004 = models.race.Race(race_number=100, place=5, horse_id=3)
    dbsession.add(race1004)


def parse_args(argv):
    parser = argparse.ArgumentParser()
    parser.add_argument(
        'config_uri',
        help='Configuration file, e.g., development.ini',
    )
    return parser.parse_args(argv[1:])


def main(argv=sys.argv):
    args = parse_args(argv)
    setup_logging(args.config_uri)
    env = bootstrap(args.config_uri)

    try:
        with env['request'].tm:
            dbsession = env['request'].dbsession
            setup_models(dbsession)
    except OperationalError:
        print('''
Pyramid is having a problem using your SQL database.  The problem
might be caused by one of the following things:

1.  You may need to initialize your database tables with `alembic`.
    Check your README.txt for description and try to run it.

2.  Your database server may not be running.  Check that the
    database server referred to by the "sqlalchemy.url" setting in
    your "development.ini" file is running.
            ''')

```

After we have saved this file we can go ahead and populate our database

```bash
$VENV/bin/initialize_midway_db development.ini
```